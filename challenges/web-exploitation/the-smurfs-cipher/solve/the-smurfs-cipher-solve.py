import sys, requests

def main():
    flag = "magpie{l0053_c0mp4r150n_l34d5_t0_tr0ub13}"

    if (len(sys.argv) != 2):
        print("Error: missing http://<address>:<port> as argument")
        exit(1)

    ip = sys.argv[1]

    key = open("solve-key", "rb")
    r = requests.post(ip + "/decrypt.php", files={"key": key})

    print(r.text)

    if (flag in r.text):
        print("Flag retrieved successfully")
    else:
        print("Error: Flag not retrieved")

main()